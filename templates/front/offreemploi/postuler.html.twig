{% extends 'baseFront.html.twig' %}

{% block title %}Postuler pour {{ offre.titre|default('Job Application') }} - Emigrar{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {# Ensure contact form styles are included, if not in app.css #}
    <style>
        .rt-form.rt-line-form .form-control {
            border: none;
            border-bottom: 1px solid #ddd;
            border-radius: 0;
            padding: 10px 0;
        }
        .rt-form.rt-line-form .form-control::placeholder {
            color: #999;
        }
        .rt-form.rt-line-form textarea.form-control {
            height: 100px;
        }
        .rt-form.rt-line-form .custom-file-input {
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }
        .rt-form.rt-line-form .custom-file-label {
            border: none;
            background: none;
            color: #999;
            padding: 10px 0;
        }
        .rt-form.rt-line-form .custom-file-label::after {
            content: "Browse";
            background: #007bff;
            color: white;
            border-radius: 0;
            padding: 5px 10px;
        }
    </style>
{% endblock %}

{% block body %}
    <!-- Breadcrumb Area -->
    <div class="rt-breadcump rt-breadcump-height">
        <div class="rt-page-bg rtbgprefix-cover" style="background-image: url({{ asset('assets/images/backgrounds/bredcump.png') }})"></div>
        <div class="container">
            <div class="row rt-breadcump-height">
                <div class="col-12">
                    <div class="breadcrumbs-content">
                        <h3>Apply for {{ offre.titre|default('Job Application') }}</h3>
                        <div class="breadcrumbs">
                            <span class="divider"><i class="icofont-home"></i></span>
                            <a  title="Home">Home</a>
                            <span class="divider"><i class="icofont-simple-right"></i></span>
                            <a href="{{ path('app_offreemploi_index') }}">Job Offers</a>
                            <span class="divider"><i class="icofont-simple-right"></i></span>
                            Apply
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Form Section -->
    <section class="contact-area">
        <div class="rt-design-elmnts rtbgprefix-contain" style="background-image: url({{ asset('assets/images/all-img/abt_vec_3.png') }})"></div>
        <div class="container">
            <div class="row">
                <div class="col-lg-7 mx-auto">
                    <div class="rt-section-title-wrapper text-center">
                        <h2 class="rt-section-title">
                            <span>Job Application</span>
                        </h2>
                        <p>Complete the form below to apply for this position. Ensure all required fields are filled for immediate consideration.</p>
                        <div class="section-title-spacer"></div>
                    </div>
                    {% for flashMessage in app.flashes('success') %}
                        <div class="alert alert-success rt-mb-30" role="alert">
                            {{ flashMessage }}
                        </div>
                    {% endfor %}
                    <form action="{{ path('app_offreemploi_postuler', {'id': offre.id}) }}" method="post" enctype="multipart/form-data" class="rt-form rt-line-form">
                        {{ form_start(form) }}
                        <div class="form-group">
                            {{ form_widget(form.username, {'attr': {'class': 'form-control rt-mb-30', 'placeholder': 'Your Name'}}) }}
                        </div>
                        <div class="form-group">
                            {{ form_widget(form.password_hash, {'attr': {'class': 'form-control rt-mb-30', 'placeholder': 'Password'}}) }}
                        </div>
                        <div class="form-group">
                            {{ form_widget(form.email, {'attr': {'class': 'form-control rt-mb-30', 'placeholder': 'Your Email'}}) }}
                        </div>
                        <div class="form-group">
                            <div class="custom-file rt-mb-30">
                                {{ form_widget(form.fichier_cv, {'attr': {'class': 'custom-file-input', 'id': 'fichier_cv'}}) }}
                                <label class="custom-file-label" for="fichier_cv">Choose CV File</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="custom-file rt-mb-30">
                                {{ form_widget(form.photo_profil, {'attr': {'class': 'custom-file-input', 'id': 'photo_profil'}}) }}
                                <label class="custom-file-label" for="photo_profil">Choose Profile Photo</label>
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_widget(form.experience, {'attr': {'class': 'form-control rt-mb-30', 'placeholder': 'Your Experience'}}) }}
                        </div>
                        <div class="form-group">
                            {{ form_widget(form.motivation, {'attr': {'class': 'form-control rt-mb-30', 'placeholder': 'Your Motivation', 'rows': '5'}}) }}
                        </div>
                        <div class="form-group">
                            {{ form_widget(form.langues, {'attr': {'class': 'form-control rt-mb-30', 'placeholder': 'Languages Spoken'}}) }}
                        </div>
                        <button type="submit" class="rt-btn rt-gradient pill text-uppercase rt-mb-30">SUBMIT NOW</button>
                        {{ form_end(form) }}
                    </form>
                </div>
            </div>
            <div class="section-title-spacer"></div>
        </div>
    </section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            $('.custom-file-input').on('change', function() {
                let fileName = $(this).val().split('\\').pop();
                $(this).siblings('.custom-file-label').addClass('selected').html(fileName || 'Choose File');
            });
        });
    </script>
{% endblock %}