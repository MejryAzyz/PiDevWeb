{# templates/front/transport_reservation_edit.html.twig #}
{% extends 'baseFront.html.twig' %}

{% block title %}Modifier RÃ©servation Transport{% endblock %}

{% block body %}
<div class="rt-breadcump rt-breadcump-height">
    <div class="rt-page-bg rtbgprefix-cover" style="background-image: url({{ asset('coderthemes.com/osen/layouts/assets/images/backgrounds/bredcump.png') }})"></div>
    <div class="container">
        <div class="row rt-breadcump-height">
            <div class="col-12">
                <div class="breadcrumbs-content">
                    <h3>Mes reservation</h3>
                    <div class="breadcrumbs">
                        <span class="divider"><i class="icofont-home"></i></span>
                        <a href="" title="Accueil">Accueil</a>
                        <span class="divider"><i class="icofont-simple-right"></i></span>
                        Reservation
                    </div><!-- /.breadcrumbs -->
                </div><!-- /.breadcrumbs-content -->
            </div><!-- /.col-12 -->
        </div><!-- /.row -->
    </div><!-- /.container -->
</div>

<section class="content-area">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6 col-md-8">
                <div class="card p-4 mt-4 shadow-sm">
                    <h5 class="text-center mb-4">Paiment de {{ amount }} dinar</h5>
                        <form id="payment-form" action="{{ path('stripe_payment_submit', { id: id }) }}" method="POST">
                            <div class="mb-3">
                                <label for="card-element" class="form-label">Informations de la carte</label>
                                <div id="card-element" class="form-control">
                                    <!-- Stripe card element will be inserted here -->
                                </div>
                                <div id="card-errors" class="text-danger mt-2" role="alert"></div>
                            </div>
                            <div class="text-center">
                                <button class="btn btn-success" id="submit">Payer</button>
                            </div>
                        </form> 
                </div>
            </div>
        </div>
    </div>
</section>
{% block javascripts %}
<script src="https://js.stripe.com/v3/"></script>
<script>
    const stripe = Stripe("pk_test_51LIEwXK099fQ1yytENVxqZPJB7n06iSKmSqyABzxVfM4cZogvNR50Q1klrAAtxHzD6LAaBv0Z91LmCsm6HcsKYqe005U6sqb0Y");
    const elements = stripe.elements();
    const card = elements.create('card', {
        style: {
            base: {
                fontSize: '16px',
                color: '#32325d',
                '::placeholder': { color: '#aab7c4' }
            },
            invalid: {
                color: '#fa755a',
                iconColor: '#fa755a'
            }
        }
    });

    card.mount('#card-element');

    const form = document.getElementById('payment-form');
    const errorElement = document.getElementById('card-errors');

    form.addEventListener('submit', function(event) {
        stripe.createToken(card).then(function(result) {
            if (result.error) {
                errorElement.textContent = result.error.message;
            } else {
                form.submit()
            }
        });
    });
</script>
{% endblock %}
{% endblock %}
